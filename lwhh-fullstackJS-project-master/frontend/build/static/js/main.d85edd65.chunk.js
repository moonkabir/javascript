(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(65)},37:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(28),l=a.n(o),i=a(7),c=a(8),r=a(10),u=a(9),m=a(11),h=a(29),p=a(15),g=(a(37),a(12)),d=a.n(g),f={BASE:"https://lwhhjs.herokuapp.com"},S=a(6),E=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={isSignup:!1,fullname:"",email:"",password:"",loginSuccess:!1},a.showSignupForm=function(){a.setState({isSignup:!0})},a.showLogin=function(){a.setState({isSignup:!1})},a.updateStateValue=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(p.a)({},n,s))},a.loginSignup=function(){var e=a.state,t=e.email,n=e.password;if(a.state.isSignup)if(a.state.fullname&&a.state.email&&a.state.password){var s=a.state.fullname;d.a.post("".concat(f.BASE,"/signup"),{name:s,email:t,password:n}).then(function(e){alert("Congratulations! Sign up completed"),a.setState({isSignup:!1})}).catch(function(e){console.log("Sign up Error! please try again")}).then(function(e){a.setState({fullname:"",email:"",password:""})})}else alert("Parameter missing for signup");else a.state.email&&a.state.password?d.a.post("".concat(f.BASE,"/login"),{email:t,password:n}).then(function(e){localStorage.setItem("access_token",e.data.token),a.setState({loginSuccess:!0})}).catch(function(e){alert("Login Unsuccessful")}):alert("Parameter missing for Login")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("access_token")&&this.setState({loginSuccess:!0})}},{key:"render",value:function(){return this.state.loginSuccess?s.a.createElement(S.a,{to:"/"}):s.a.createElement("div",{className:"container",style:y.container},s.a.createElement("h2",null,this.state.isSignup?"Sign Up":"Log In"),s.a.createElement("div",{className:"loginsignup"},s.a.createElement("input",{onChange:this.updateStateValue,style:Object(h.a)({},y.input,{display:this.state.isSignup?"block":"none"}),type:"text",name:"fullname",placeholder:"full name"}),s.a.createElement("input",{onChange:this.updateStateValue,style:y.input,type:"email",name:"email",placeholder:"Email Address"}),s.a.createElement("input",{onChange:this.updateStateValue,style:y.input,type:"password",name:"password",placeholder:"Enter password"})),s.a.createElement("div",{className:"button",onClick:this.loginSignup},this.state.isSignup?"Sign Up":"Login"),s.a.createElement("div",{className:"button",style:{display:this.state.isSignup?"none":"block"},onClick:this.showSignupForm},"Sign Up Now \u2192"),s.a.createElement("div",{className:"button",style:{display:this.state.isSignup?"block":"none"},onClick:this.showLogin},"\u2190 Go Back To Login"))}}]),t}(n.Component),y={input:{fontSize:18,color:"blue",display:"block"}};function v(e){return e.condition?s.a.createElement("div",{className:e.className},e.children):null}function w(e){return s.a.createElement("div",{className:"url"},s.a.createElement("h4",{className:"shortened-url"},s.a.createElement("a",{target:"_blank",href:"".concat(f.BASE,"/").concat(e.data.hash)},"".concat(f.BASE,"/").concat(e.data.hash))),s.a.createElement("div",{className:"smalltext"},s.a.createElement("a",{target:"_blank",href:e.data.destination},e.data.destination)))}var k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={loggedIn:!0,loading:!0,token:"",newHash:"",urlList:[]},a.scheduleClear=function(){a.setState({newHash:""})},a.getMyList=function(){d.a.get("".concat(f.BASE,"/api/v1/redirects"),{headers:{"auth-token":a.state.token}}).then(function(e){a.setState({urlList:e.data})}).catch(function(e){console.log(e)})},a.handleKeyUp=function(e){if(13===e.keyCode){var t=e.target.value;e.target.value="",t&&t.match(/^https?:\/\/.{3,}/)&&(a.setState({loading:!0}),d.a.post("".concat(f.BASE,"/api/v1/redirects"),{url:t},{headers:{"auth-token":a.state.token}}).then(function(e){console.log(e),a.setState({newHash:e.data.hash}),a.getMyList(),setTimeout(a.scheduleClear,1e4)}).catch(function(e){return console.log(e)}).finally(function(){a.setState({loading:!1})}))}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("access_token");e?this.setState({token:e},this.getMyList):this.setState({loggedIn:!1})}},{key:"render",value:function(){return this.state.loggedIn?s.a.createElement("div",null,s.a.createElement("div",{className:"urlentry commonsize"},s.a.createElement("h3",null,"Add New URL"),s.a.createElement("div",null,s.a.createElement("input",{onKeyUp:this.handleKeyUp,placeholder:"Enter long URL. e.g: https://my-long.url/parameters?query",type:"url"}))),s.a.createElement(v,{className:"success commonsize",condition:this.state.newHash},"Your new Shortened URL is: ",s.a.createElement("a",{target:"_blank",href:"".concat(f.BASE,"/").concat(this.state.newHash)},"".concat(f.BASE,"/").concat(this.state.newHash))),s.a.createElement("div",{className:"commonsize"},s.a.createElement("h3",null,"Your URL List")),s.a.createElement("div",{className:"url-list"},this.state.urlList.reverse().map(function(e,t){return s.a.createElement(w,{data:e,key:t})}),s.a.createElement(v,{condition:!this.state.urlList.length,className:"empty"},"\ud83e\uddd0 hmm! Could not find anything yet!"))):s.a.createElement(S.a,{to:"/"})}}]),t}(n.Component),b=a(14);function L(){return localStorage.getItem("access_token")?s.a.createElement(S.a,{to:"/urls"}):s.a.createElement(S.a,{to:"/loginsignup"})}var j=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(b.a,null,s.a.createElement(S.b,{exact:!0,path:"/",component:L}),s.a.createElement(S.b,{path:"/loginsignup",component:E}),s.a.createElement(S.b,{path:"/urls",component:k})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.d85edd65.chunk.js.map